// Generated by CoffeeScript 1.10.0
(function() {
  var ConversionTracking, UserTracking;

  UserTracking = function() {
    var create, init, isValidDomain, send, sendEvent, traceButtonClick;
    init = function() {
      var g, i, o, r, s;
      if (!isValidDomain()) {
        return;
      }
      i = window;
      s = document;
      o = 'script';
      g = '//www.google-analytics.com/analytics.js';
      r = 'ga';
      return (function(i, s, o, g, r) {
        var a, m;
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
          (i[r].q = i[r].q || []).push(arguments);
        };
        i[r].l = 1 * new Date;
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(i, s, o, g, r);
    };
    create = function() {
      if (!isValidDomain()) {
        return;
      }
      ga('create', 'UA-67546699-1', 'auto');
      ga('set', 'anonymizeIp', true);
      return this;
    };
    isValidDomain = function() {
      return window.location.hostname === 'rplan.com';
    };
    traceButtonClick = function(element, eventLabel, eventValue) {
      if (!isValidDomain()) {
        return;
      }
      return element != null ? element.addEventListener('click', function() {
        return sendEvent('button', 'click', eventLabel, eventValue);
      }) : void 0;
    };

    /*
     * For detail on the parameters see
     * https://developers.google.com/analytics/devguides/collection/analyticsjs/events
     */
    sendEvent = function(category, action, label, value) {
      if (!isValidDomain()) {
        return;
      }
      return ga('send', 'event', category, action, label, value);
    };
    send = function(opt_fieldObject) {
      if (!isValidDomain()) {
        return;
      }
      return ga('send', opt_fieldObject);
    };
    init();
    create();
    return {
      init: init,
      isValidDomain: isValidDomain,
      create: create,
      traceButtonClick: traceButtonClick,
      send: send,
      sendEvent: sendEvent
    };
  };

  ConversionTracking = function() {
    var init, track;
    init = function() {
      var scriptNode;
      if (window.google_trackConversion != null) {
        return;
      }
      scriptNode = document.createElement('script');
      scriptNode.type = 'text/javascript';
      scriptNode.src = '//www.googleadservices.com/pagead/conversion_async.js';
      return document.querySelector('head').appendChild(scriptNode);
    };
    track = function(cb) {
      window.google_conversion_id = 943521439;
      window.google_conversion_language = 'en';
      window.google_conversion_format = '3';
      window.google_conversion_color = 'ffffff';
      window.google_conversion_label = 'GQJPCKT8jl8Qn_3zwQM';
      window.google_remarketing_only = false;
      if (window.google_trackConversion != null) {
        return window.google_trackConversion({
          onload_callback: cb
        });
      } else {
        return cb();
      }
    };
    init();
    return {
      init: init,
      track: track
    };
  };

  module.exports = {
    userTrackingSingleton: UserTracking(),
    conversionTrackingSingleton: ConversionTracking()
  };

}).call(this);
