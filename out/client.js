// Generated by CoffeeScript 1.10.0
(function() {
  var UserTracking;

  UserTracking = function() {
    var create, init, isValidDomain, send, sendEvent, traceButtonClick;
    init = function() {
      var g, i, o, r, s;
      if (!isValidDomain()) {
        return;
      }
      i = window;
      s = document;
      o = 'script';
      g = '//www.google-analytics.com/analytics.js';
      r = 'ga';
      return (function(i, s, o, g, r) {
        var a, m;
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
          (i[r].q = i[r].q || []).push(arguments);
        };
        i[r].l = 1 * new Date;
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(i, s, o, g, r);
    };
    create = function() {
      if (!isValidDomain()) {
        return;
      }
      ga('create', 'UA-42587559-2', 'auto');
      ga('set', 'anonymizeIp', true);
      return this;
    };
    isValidDomain = function() {
      return window.location.hostname === 'localhost';
    };
    traceButtonClick = function(element, eventLabel, eventValue) {
      if (!isValidDomain()) {
        return;
      }
      return element.addEventListener('click', function() {
        return ga('send', 'event', 'button', 'click', eventLabel, eventValue);
      });
    };

    /*
     * For detail on the parameters see
     * https://developers.google.com/analytics/devguides/collection/analyticsjs/events
     */
    sendEvent = function(category, action, label, value) {
      if (!isValidDomain()) {
        return;
      }
      return ga('send', 'event', category, action, label, value);
    };
    send = function(opt_fieldObject) {
      if (!isValidDomain()) {
        return;
      }
      return ga('send', opt_fieldObject);
    };
    init();
    create();
    return {
      init: init,
      isValidDomain: isValidDomain,
      create: create,
      traceButtonClick: traceButtonClick,
      send: send,
      sendEvent: sendEvent
    };
  };

  module.exports = {
    userTrackingSingleton: UserTracking()
  };

}).call(this);
